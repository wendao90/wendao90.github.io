---
layout: post
title: webGL浅尝
---

## 明早写  因为我早上效率比较低，所以刚好适合干一些总结性的工作  
总结是为了在需要时能迅速恢复当前状态，于是放弃流水账形式的记法，改用便于快速上手的记法。  

‎1‎月‎30‎日到昨天四天内，尝试用three.js在网页上展示三维模型。  

# 1. 建立网页文件路径  
(斜体的为后续会创建的文件)  
- test
  - index.html
  - js
    - *three.min.js*
    - *GLTFLoader.js*
    - *OrbitControls.js*
    - *mygl.js*
  - src
    - *textures*
    - *scene.bin*
    - *scene.gltf*

# 2. 获取GLTF格式模型到src文件夹  
[砖块模型](https://sketchfab.com/3d-models/brick-504a59ef14a148809cec657d7c99367c)  

# 3. 下载js文件到js文件夹  
https://github.com/mrdoob/three.js/blob/dev/build/three.min.js  
https://github.com/mrdoob/three.js/blob/dev/examples/js/loaders/GLTFLoader.js  
https://github.com/mrdoob/three.js/blob/dev/examples/js/controls/OrbitControls.js  

# 4. 编辑index.html  
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>1</title>
    <style>
        body {margin:0;}
        cavas {width: 100%; height: 100% }
    </style>
</head>
<body>
    <script src="js/three.min.js"></script>
    <script src = "js/GLTFLoader.js"></script>
    <script src="js/OrbitControls.js"></script>
    <script src = "js/mygl.js"></script>
</body>
</html>
```
（检查html文件编码为utf编码：另存为，编码选择utf。否则若标题中文会报错）  

# 5. 在js下创建mygl.js并编辑  

```javascript
var camera, scene, renderer, hlight,loader;
function init(){
    scene=new THREE.Scene();
    scene.background=new THREE.Color(0x0c0c0c);

    camera=new THREE.PerspectiveCamera(40,window.innerWidth/window.innerHeight,1,5000);
    camera.rotation.y=60/180*Math.PI;
    camera.position.x=20;
    camera.position.y=0;
    camera.position.z=20;

    light = new THREE.PointLight(0xc4c4c4,1);
    light.position.set(0,300,500);
    scene.add(light);

    renderer=new THREE.WebGLRenderer({antialias:true});
    renderer.setSize(window.innerWidth,window.innerHeight);
    document.body.appendChild(renderer.domElement);

    var controls = new THREE.OrbitControls( camera, renderer.domElement );
    controls.addEventListener('change', renderer);

    loader=new THREE.GLTFLoader();
    loader.load('src/scene.gltf',function(gltf){
        car=gltf.scene.children[0];
        car.scale.set(0.5,0.5,0.5);
        scene.add(gltf.scene);
        animate();
    });
}
function animate() {
    renderer.render(scene,camera);
    requestAnimationFrame(animate);
}
init();
```













参考three.js[官方文档](https://threejs.org/docs/#manual/en/introduction/Creating-a-scene)学习了PerspectiveCamera四个参数的含义以及如何导入3D模型（开启本地服务、GLTFLoader的用法）。
最有帮助的参考来自于两个Youtube视频：[Load a 3D Model Using the Three.js OBJ Loader](https://www.youtube.com/watch?v=1TeMXIWRrqE)和[Load a 3D Model Using the Three.js OBJ Loader](https://www.youtube.com/watch?v=wHuSQ7I1aKs)。


